startCommand:
  type: stdio
  configSchema:
    type: object
    properties:
      NMAP_BINARY:
        type: string
        default: "nmap"
        description: "Path to the nmap binary"
      NMAP_SCAN_TIMEOUT:
        type: number
        default: 300
        description: "Maximum timeout in seconds for a single scan"
      NMAP_MAX_TARGETS:
        type: number
        default: 256
        description: "Maximum number of targets allowed per scan"
      FASTMCP_LOG_LEVEL:
        type: string
        default: "WARNING"
        description: "Log level for the FastMCP framework"
        enum:
          - "DEBUG"
          - "INFO"
          - "WARNING"
          - "ERROR"
  commandFunction: |
    (config) => ({
      command: "docker",
      args: [
        "run", "--rm", "-i",
        "-e", `NMAP_BINARY=${config.NMAP_BINARY ?? "nmap"}`,
        "-e", `NMAP_SCAN_TIMEOUT=${config.NMAP_SCAN_TIMEOUT ?? 300}`,
        "-e", `NMAP_MAX_TARGETS=${config.NMAP_MAX_TARGETS ?? 256}`,
        "-e", `FASTMCP_LOG_LEVEL=${config.FASTMCP_LOG_LEVEL ?? "WARNING"}`,
        "nmap-mcp"
      ]
    })
